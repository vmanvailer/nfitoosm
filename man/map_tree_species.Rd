% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/helper_map_tree_species.R
\name{map_tree_species}
\alias{map_tree_species}
\title{Map Tree Species to OSM Command Keys}
\usage{
map_tree_species(tree_table)
}
\arguments{
\item{tree_table}{A \code{data.table} containing at least the columns \code{tree_genus} and \code{tree_species}.}
}
\value{
A modified \code{data.table} with additional columns:
\describe{
\item{\code{GROUP}}{The species group (e.g., "Softwood", "Hardwood").}
\item{\code{OSM_AD_CmdKey}}{The OSM command key for each tree, used to identify species in the model.}
}
}
\description{
Matches tree species from NFI-derived data to the standardized \code{OSM_AD_CmdKey}
used by the Open Stand Model (OSM), using both genus-species and genus-only lookup tables.
}
\details{
This function performs a multi-step matching process to assign the correct OSM command key:
\enumerate{
\item Performs an exact match on genus and species using the \code{acadian_gnsp_only} reference.
\item If no match is found, attempts a fallback match using only genus (rows with species code \code{"SPP"}).
\item If still unmatched, assigns fallback codes based on species group:
\itemize{
\item \code{"OS"} for Softwoods
\item \code{"OH"} for Hardwoods
\item \code{"XX"} for unknown or unmatched species
}
}

It also merges softwood/hardwood group classification from the \code{nfi_species} reference table.

This function relies on two reference objects that are available as part of the package:
\itemize{
\item \code{nfi_species}: Lookup table of genus/species and species group.
\item \code{acadian_gnsp_only}: OSM species lookup table with genus/species and fallback genus-only entries.
}
}
\examples{
\dontrun{
tree_table <- data.table(tree_genus = "Picea", tree_species = "mariana")
tree_table <- map_tree_species(tree_table)
}

}
